{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { UserContext } from \"../App\";\nfunction Callback() {\n  _s();\n  console.log(\"I AM HERE!\");\n  const navigate = useNavigate();\n  const UserInfo = useContext(UserContext);\n  useEffect(() => {\n    console.log(\"callback!\");\n    const fetchData = async () => {\n      let search = window.location.search;\n      let params = new URLSearchParams(search.split('?')[1]);\n      console.log('params:', params);\n      if (localStorage.getItem(\"jwtToken\") != null) {\n        navigate('/');\n        return; ////\n      }\n      const codeParam = {\n        code: params.get('code')\n      };\n      console.log(\"before try\", codeParam);\n      try {\n        console.log(\"in the try\");\n        const response = await axios.get(\"/callback\", {\n          params: codeParam\n        });\n        const token = response.data.token; // Assuming the token is returned in response.data.token\n        console.log(response.data.token);\n        localStorage.setItem('jwtToken', token);\n        UserInfo.SetAllInfo(response.data.user);\n        console.log('Response:', response);\n        navigate('/');\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    fetchData();\n  }, []);\n  return null;\n}\n_s(Callback, \"0TuYpT0rkZHNGSblDcCDtx+L/Ng=\", false, function () {\n  return [useNavigate];\n});\n_c = Callback;\nexport default Callback;\nvar _c;\n$RefreshReg$(_c, \"Callback\");","map":{"version":3,"names":["React","useEffect","useContext","useNavigate","axios","UserContext","Callback","_s","console","log","navigate","UserInfo","fetchData","search","window","location","params","URLSearchParams","split","localStorage","getItem","codeParam","code","get","response","token","data","setItem","SetAllInfo","user","error","_c","$RefreshReg$"],"sources":["D:/university/8/IE/CA/1-2/MizDooni/CA6/Frontend/src/components/Callback.js"],"sourcesContent":["import React, { useEffect, useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { UserContext } from \"../App\";\r\n\r\n\r\nfunction Callback() {\r\n    console.log(\"I AM HERE!\")\r\n    const navigate = useNavigate();\r\n    const UserInfo = useContext(UserContext);\r\n    useEffect(() => {\r\n        console.log(\"callback!\")\r\n        const fetchData = async () => {\r\n            let search = window.location.search;\r\n            let params = new URLSearchParams(search.split('?')[1]);\r\n            console.log('params:', params);\r\n\r\n            if (localStorage.getItem(\"jwtToken\") != null) {\r\n                navigate('/');\r\n                return; ////\r\n            }\r\n\r\n            const codeParam = { code: params.get('code') };\r\n\r\n            console.log(\"before try\", codeParam)\r\n\r\n            try {\r\n                console.log(\"in the try\")\r\n                const response = await axios.get(\"/callback\", {params: codeParam});\r\n                const token = response.data.token; // Assuming the token is returned in response.data.token\r\n                console.log(response.data.token)\r\n                localStorage.setItem('jwtToken', token);\r\n                UserInfo.SetAllInfo(response.data.user);\r\n                console.log('Response:', response);\r\n                navigate('/');\r\n            } catch (error) {\r\n                console.error(error);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, []);\r\n\r\n    return null;\r\n}\r\n\r\nexport default Callback;"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AACpD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,QAAQ;AAGpC,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EAChBC,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;EACzB,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAMQ,QAAQ,GAAGT,UAAU,CAACG,WAAW,CAAC;EACxCJ,SAAS,CAAC,MAAM;IACZO,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;IACxB,MAAMG,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC1B,IAAIC,MAAM,GAAGC,MAAM,CAACC,QAAQ,CAACF,MAAM;MACnC,IAAIG,MAAM,GAAG,IAAIC,eAAe,CAACJ,MAAM,CAACK,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;MACtDV,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEO,MAAM,CAAC;MAE9B,IAAIG,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,IAAI,IAAI,EAAE;QAC1CV,QAAQ,CAAC,GAAG,CAAC;QACb,OAAO,CAAC;MACZ;MAEA,MAAMW,SAAS,GAAG;QAAEC,IAAI,EAAEN,MAAM,CAACO,GAAG,CAAC,MAAM;MAAE,CAAC;MAE9Cf,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEY,SAAS,CAAC;MAEpC,IAAI;QACAb,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;QACzB,MAAMe,QAAQ,GAAG,MAAMpB,KAAK,CAACmB,GAAG,CAAC,WAAW,EAAE;UAACP,MAAM,EAAEK;QAAS,CAAC,CAAC;QAClE,MAAMI,KAAK,GAAGD,QAAQ,CAACE,IAAI,CAACD,KAAK,CAAC,CAAC;QACnCjB,OAAO,CAACC,GAAG,CAACe,QAAQ,CAACE,IAAI,CAACD,KAAK,CAAC;QAChCN,YAAY,CAACQ,OAAO,CAAC,UAAU,EAAEF,KAAK,CAAC;QACvCd,QAAQ,CAACiB,UAAU,CAACJ,QAAQ,CAACE,IAAI,CAACG,IAAI,CAAC;QACvCrB,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEe,QAAQ,CAAC;QAClCd,QAAQ,CAAC,GAAG,CAAC;MACjB,CAAC,CAAC,OAAOoB,KAAK,EAAE;QACZtB,OAAO,CAACsB,KAAK,CAACA,KAAK,CAAC;MACxB;IACJ,CAAC;IAEDlB,SAAS,CAAC,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO,IAAI;AACf;AAACL,EAAA,CAtCQD,QAAQ;EAAA,QAEIH,WAAW;AAAA;AAAA4B,EAAA,GAFvBzB,QAAQ;AAwCjB,eAAeA,QAAQ;AAAC,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}